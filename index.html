<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Coin Maker TON Connect</title>
  <script src="https://unpkg.com/@tonconnect/ui@2.0.8/dist/tonconnect-ui.min.js"></script>
  <style>
    body { font-family: Arial; display: flex; flex-direction: column; align-items: center; padding: 20px; }
    button { padding: 10px 20px; margin-top: 10px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Coin Maker Wallet</h1>
  <div id="walletStatus">Кошелек не подключен</div>
  <button id="connectWallet">Подключить TON Wallet</button>
  <button id="sendTon" disabled>Отправить 0.1 TON</button>

<script>
  const OWNER_WALLET = "UQAmTM_EE8D6seecLKf-h8aXVQasliniDDQ52EvBj7PqExNr";

  // Инициализация TonConnect UI
  const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
    manifestUrl: 'https://ton-connect.github.io/demo-dapp-with-react-ui/tonconnect-manifest.json',
    buttonRootId: null
  });

  let walletInfo = null;

  document.getElementById("connectWallet").onclick = async () => {
    try {
      walletInfo = await tonConnectUI.connectWallet();
      document.getElementById("walletStatus").innerText = "Кошелек подключен: " + walletInfo.account;
      document.getElementById("sendTon").disabled = false;
    } catch (e) {
      alert("Не удалось подключить кошелек: " + e);
    }
  };

  document.getElementById("sendTon").onclick = async () => {
    if (!walletInfo) return alert("Подключите кошелек");

    try {
      await tonConnectUI.sendTransaction({
        validUntil: Math.floor(Date.now() / 1000) + 600,
        messages: [{
          address: OWNER_WALLET,
          amount: (0.1 * 1e9).toString() // 0.1 TON
        }]
      });
      alert("Транзакция отправлена!");
    } catch (e) {
      alert("Ошибка транзакции: " + e);
    }
  };
</script>
</body>
</html>
